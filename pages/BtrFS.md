- ***NOTE: BtrFS does not officially support RAID-5.  Their documentation lists it as "EXPERIMENTAL".***
  background-color:: red
- ### Drive initialization:
	- Use the built-in 'parted' command to perform the initialization.  It will create the drive label and create a primary partition.  Do this for every drive that will be added to the array.
		- ``parted -s {DRIVE-ID} mklabel gpt mkpart primary btrfs 0% 100%``
		- EXAMPLE:
			- ``parted -s /dev/sdb mklabel gpt mkpart primary btrfs 0% 100%``
- ### Make an array:
	- #### RAID-1
		- ``mkfs.btrfs -d raid1 {DRIVE_1}1 {DRIVE_2}1``
		- EXAMPLE:
			- ``mkfs.btrfs -d raid1 /dev/sdb1 /dev/sdc1``
	- #### RAID-5
		- ``mkfs.btrfs -d raid5 {DRIVE_1}1 {DRIVE_2}1 {DRIVE_3}1``
		- EXAMPLE:
			- ``mkfs.btrfs -d raid5 /dev/sdb1 /dev/sdc1 /dev/sdd1``
	- NOTE: You do NOT mount the file system.  it will be imported from [[OpenMediaVault OMV]]
	  background-color:: gray
- ### Convert from RAID-1 to RAID-5
	- ``btrfs balance start -dconcert=raid5 -mconvert=raid1 {POOL_LOCATION}``
	- EXAMPLE:
		- ``btrfs balance start -dconcert=raid5 -mconvert=raid1 /srv/dev-disk-by-uuid-71a84d92-2675-45de-b343-cd7565537305/``
- ### Expand an array by adding a new drive.
	- #### Identify New Drive:
		- First, identify the new drive you want to add to the Btrfs filesystem. You can use the `lsblk` tool to list available drives and partitions.
	- #### Partition New Drive:
		- If the new drive is not already partitioned, you need to partition it. You can use the 'parted' tool for this purpose. (*See above.*)
	- #### Add New Drive to Btrfs Filesystem:
		- Once the new drive is partitioned, you can add it to the existing Btrfs filesystem using the `btrfs device add` command. For example:
		- ``btrfs device add {DRIVE-ID}1 {POOL_LOCATION}``
		- EXAMPLE:
			- ``btrfs device add /dev/sde1 /srv/dev-disk-by-uuid-71a84d92-2675-45de-b343-cd7565537305/``
	- #### Expand the filesystem to use the added space.
		- After adding the new drive, you need to resize the Btrfs filesystem to make use of the additional space. Use the `btrfs filesystem resize` command:
		- ```
		  bash
		  - Copy code
		  - sudo btrfs filesystem resize max /mnt/btrfs
		  ```
		- This command will resize the filesystem to use all available space.
- ### Check the status of a balance:
	- ``btrfs scrub status {POOL_LOCATION}``
	- EXAMPLE:
		- ``btrfs scrub status /srv/dev-disk-by-uuid-71a84d92-2675-45de-b343-cd7565537305/``
- ### Scrub BtrFS to check data integrity.
	- Scrubbing is an important maintenance task for ensuring the integrity of your data, especially on RAID setups where data integrity is crucial.
		- #### start
			- To start a scrub operation on a Btrfs filesystem, you use the following command:
				- ``btrfs scrub start {POOL_LOCATION}``
				- EXAMPLE:
					- ``btrfs scrub start /srv/dev-disk-by-uuid-71a84d92-2675-45de-b343-cd7565537305/``
		- #### status
			- You can check the status of the scrub operation using the following command.  This command will display information about the scrub operation, including progress, the number of bytes scrubbed, and any errors encountered.
				- ``btrfs scrub status {POOL_LOCATION}``
				- EXAMPLE:
					- ``btrfs scrub status /srv/dev-disk-by-uuid-71a84d92-2675-45de-b343-cd7565537305/``
		- #### suspend
			- By suspending and resuming a scrub operation, you can temporarily halt the operation and then continue it later without losing progress. This can be useful if you need to free up system resources or if you want to schedule the scrub to run during off-peak hours.
				- ``btrfs scrub suspend {POOL_LOCATION}``
				- EXAMPLE:
					- ``btrfs scrub suspend /srv/dev-disk-by-uuid-71a84d92-2675-45de-b343-cd7565537305/``
		- #### resume
			- To resume a previously suspended scrub operation, you can use the following command.  This command will resume the scrub operation on the specified filesystem from where it was suspended.
				- ``btrfs scrub resume {POOL_LOCATION}``
				- EXAMPLE:
					- ``btrfs scrub resume /srv/dev-disk-by-uuid-71a84d92-2675-45de-b343-cd7565537305/``
		- #### cancel
			- If needed, you can cancel a scrub operation using the following command.  This command will stop the scrub operation before it completes.
				- ``btrfs scrub cancel {POOL_LOCATION}``
				- EXAMPLE:
					- ``btrfs scrub cancel /srv/dev-disk-by-uuid-71a84d92-2675-45de-b343-cd7565537305/``
		- #### stop
			-
				- Once the scrub operation completes, you can stop it using the following command.  This command stops the scrub operation and finalizes the results.
				- ``btrfs scrub stop {POOL_LOCATION}``
				- EXAMPLE:
					- ``btrfs scrub stop /srv/dev-disk-by-uuid-71a84d92-2675-45de-b343-cd7565537305/``
-